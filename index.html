<script>
  async function trackVisit() {
    try {
      const geoRes = await fetch('https://ipapi.co/json/');
      const geoData = await geoRes.json();
      const country = geoData.country_name || 'Unknown';

      await fetch(`/api/track?action=visit&country=${encodeURIComponent(country)}`)
    } catch (e) {
      console.error('Errore tracking visita:', e);
      // In caso di errore, manda comunque senza paese
      await fetch('/api/track?action=visit');
    }
  }

  trackVisit();
</script>
